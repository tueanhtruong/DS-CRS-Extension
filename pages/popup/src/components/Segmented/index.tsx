import { Button, Stack } from '@mui/material';
import { useUncontrolled } from '@src/hook/useUncontrolled';
import * as React from 'react';
import { useNavigate } from 'react-router';

export type TabValue = 'home' | 'map' | 'leaderboard';

export type SegmentedControlsProps = {
  onChange?: (tab: TabValue) => void;
  value?: TabValue;
};

export function SegmentedControls({ onChange, value }: SegmentedControlsProps) {
  const navigate = useNavigate();
  const [currentTab, setCurrentTab] = useUncontrolled<TabValue>({ defaultValue: 'home', onChange, value });
  const handleChanged = (tab: TabValue) => () => {
    if (tab === 'leaderboard') {
      navigate('/popup/index.html/leaderboard');
    }
    setCurrentTab(tab);
  };
  return (
    <Stack
      direction="row"
      spacing={1}
      className="bg-[#F3F3F3] p-1.5"
      style={{ width: 'fit-content', gap: 8, borderRadius: 8 }}>
      <Button
        variant={currentTab === 'home' ? 'contained' : 'text'}
        className="p-2.5"
        style={{ minWidth: 'unset' }}
        onClick={handleChanged('home')}>
        <svg width="20" height="20" viewBox="0 0 16 17" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path
            fillRule="evenodd"
            clipRule="evenodd"
            d="M7.57958 1.03754C7.81797 0.820821 8.18203 0.820821 8.42042 1.03754L15.2954 7.28754C15.4257 7.40599 15.5 7.57391 15.5 7.75V15.25C15.5 15.9404 14.9404 16.5 14.25 16.5H10.5C9.80964 16.5 9.25 15.9404 9.25 15.25V12.125C9.25 11.7798 8.97018 11.5 8.625 11.5H7.375C7.02982 11.5 6.75 11.7798 6.75 12.125V15.25C6.75 15.9404 6.19036 16.5 5.5 16.5H1.75C1.05964 16.5 0.5 15.9404 0.5 15.25V7.75C0.5 7.57391 0.574283 7.40599 0.70458 7.28754L7.57958 1.03754ZM1.75 8.02648V15.25H5.5V12.125C5.5 11.0895 6.33947 10.25 7.375 10.25H8.625C9.66053 10.25 10.5 11.0895 10.5 12.125V15.25H14.25V8.02648L8 2.34466L1.75 8.02648Z"
            fill="currentColor"
          />
        </svg>
      </Button>
      <Button
        variant={currentTab === 'map' ? 'contained' : 'text'}
        onClick={handleChanged('map')}
        className="p-2.5"
        style={{ minWidth: 'unset' }}>
        <svg width="21" height="20" viewBox="0 0 21 20" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path
            fillRule="evenodd"
            clipRule="evenodd"
            d="M13.5886 3.09997V14.0121C13.8952 14.0435 14.1914 14.1281 14.4611 14.2232C14.7177 14.3136 14.9882 14.4285 15.2378 14.5345C15.3361 14.5762 15.4312 14.6166 15.5209 14.6536C15.8605 14.7935 16.1529 14.8983 16.4153 14.9435C16.6703 14.9875 16.8585 14.9683 17.0121 14.8976C17.0957 14.8589 17.1703 14.8032 17.2311 14.734L17.2319 14.7331C17.2772 14.6818 17.339 14.5743 17.3748 14.255C17.4112 13.9311 17.4121 13.4932 17.4121 12.8433V5.82495C17.4121 5.3619 17.4113 5.06181 17.3862 4.83358C17.3625 4.61898 17.3225 4.52889 17.2816 4.46993C17.2417 4.41261 17.1761 4.34845 16.9933 4.26034C16.7958 4.16509 16.5247 4.07046 16.0991 3.92345C15.8497 3.83728 15.5921 3.73427 15.3444 3.6352C15.3269 3.62822 15.3095 3.62125 15.2921 3.61432C15.0229 3.50675 14.7622 3.40362 14.5026 3.31613C14.1713 3.20447 13.8676 3.12771 13.5886 3.09997ZM12.4121 14.1531V3.31976C11.9438 3.53809 11.4908 3.89284 10.9778 4.31767C10.9336 4.35433 10.8888 4.39159 10.8435 4.42932C10.215 4.95226 9.48039 5.5635 8.58858 5.85013V16.684C9.05687 16.4654 9.5099 16.1106 10.0228 15.6857C10.067 15.6491 10.1117 15.6119 10.1569 15.5743C10.7855 15.0512 11.5201 14.4398 12.4121 14.1531ZM7.41211 16.9019V5.99198C7.10545 5.96049 6.80916 5.87584 6.53952 5.78072C6.28284 5.69017 6.01227 5.57521 5.76262 5.46913C5.66435 5.42737 5.56933 5.38699 5.47966 5.35002C5.14008 5.21001 4.84769 5.10515 4.58524 5.05981C4.33013 5.01574 4.14193 5.03497 3.98835 5.10579L3.98798 5.10596C3.90586 5.14376 3.83209 5.19857 3.77071 5.26878L3.76876 5.27101C3.72345 5.32231 3.66168 5.42974 3.62584 5.74875C3.58946 6.07254 3.58858 6.5104 3.58858 7.16079V14.1783C3.58858 14.6422 3.58941 14.9423 3.61452 15.1702C3.63811 15.3843 3.67802 15.4742 3.71914 15.5333C3.81106 15.6651 4.02682 15.845 4.39147 16.0395C4.74194 16.2264 5.17467 16.398 5.63115 16.5394C6.08628 16.6805 6.55076 16.7872 6.95938 16.8496C7.12709 16.8752 7.27876 16.8923 7.41211 16.9019ZM8.06629 4.77609C8.79679 4.59712 9.41212 4.08722 10.1632 3.46484C10.1845 3.44718 10.2059 3.42944 10.2274 3.41161C10.9566 2.80767 11.8315 2.09533 12.9569 1.93981C13.6301 1.84578 14.2978 2.00561 14.8783 2.20127C15.1726 2.30045 15.4614 2.41503 15.7287 2.52184L15.7735 2.53977C16.0287 2.64177 16.2615 2.73483 16.4833 2.81146C16.4832 2.81145 16.4833 2.81146 16.4833 2.81146L16.5133 2.82183C16.9001 2.95544 17.2372 3.07188 17.5042 3.2006C17.793 3.33979 18.0515 3.51646 18.2475 3.7983C18.4423 4.07851 18.5202 4.38384 18.5556 4.70486C18.5886 5.00509 18.5886 5.3705 18.5886 5.79445V12.8781C18.5886 13.4843 18.5886 13.9889 18.544 14.3863C18.498 14.7959 18.3961 15.1919 18.1141 15.5115C17.9451 15.7035 17.7378 15.8582 17.5055 15.9656L17.505 15.9658C17.0687 16.167 16.6211 16.1729 16.2153 16.1029C15.8169 16.0341 15.4234 15.8858 15.0727 15.7413C14.9563 15.6934 14.846 15.6465 14.7396 15.6013C14.5054 15.5018 14.2901 15.4104 14.0699 15.3327C13.7565 15.2222 13.508 15.1691 13.3053 15.1761C13.1799 15.181 13.0554 15.1981 12.9334 15.2274C12.2032 15.4066 11.588 15.9165 10.8371 16.5389C10.8159 16.5564 10.7947 16.574 10.7733 16.5917C10.044 17.1958 9.16908 17.9084 8.04353 18.0643C7.69253 18.113 7.24047 18.0826 6.78188 18.0126C6.3116 17.9408 5.79004 17.8204 5.28288 17.6632C4.77706 17.5064 4.27126 17.3087 3.83782 17.0776C3.41882 16.8541 3.00536 16.5671 2.75342 16.2052C2.55871 15.9252 2.4805 15.6201 2.44513 15.299C2.41208 14.999 2.41209 14.6336 2.41211 14.2089L2.41211 7.12595C2.41209 6.51938 2.41208 6.01478 2.45673 5.6174C2.50271 5.20816 2.6045 4.81272 2.88592 4.49339C3.05594 4.2992 3.26338 4.14444 3.49568 4.03745M8.06629 4.77609C7.94392 4.80605 7.82057 4.82327 7.6958 4.82793C7.49303 4.83502 7.24449 4.78189 6.93091 4.67126C6.71065 4.59356 6.49533 4.50202 6.26107 4.40244C6.15473 4.35723 6.04449 4.31036 5.92811 4.26238C5.57748 4.11781 5.18394 3.96934 4.78551 3.90051C4.37984 3.83043 3.93235 3.83619 3.49605 4.03728"
            fill="currentColor"
          />
        </svg>
      </Button>
      <Button
        variant={currentTab === 'leaderboard' ? 'contained' : 'text'}
        className="p-2.5"
        onClick={handleChanged('leaderboard')}
        style={{ minWidth: 'unset' }}>
        <svg width="21" height="20" viewBox="0 0 21 20" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path
            d="M10.501 17.7094C11.7229 17.7094 12.7617 17.2819 13.6174 16.4269C14.473 15.5719 14.9006 14.5331 14.8999 13.3105C14.8993 12.0879 14.4717 11.0495 13.6174 10.1951C12.763 9.34072 11.7242 8.91289 10.501 8.91158C9.27775 8.91028 8.23928 9.33812 7.38556 10.1951C6.53184 11.0521 6.10401 12.0905 6.10205 13.3105C6.1001 14.5305 6.52793 15.5693 7.38556 16.4269C8.24319 17.2845 9.28166 17.712 10.501 17.7094ZM7.6798 8.75029C7.99261 8.54566 8.32595 8.3811 8.67982 8.25663C9.03434 8.13216 9.39896 8.04092 9.77369 7.98292L7.54881 3.57226H5.10496L7.6798 8.75029ZM5.83518 16.6684C5.97239 16.6682 6.00098 16.6684 6.25488 16.6406C6.58034 16.6051 6.19787 16.0713 6.08348 15.8863C5.7824 15.3995 5.56538 14.8739 5.43244 14.3096C5.29949 13.7452 5.26463 13.1642 5.32784 12.5666C5.32784 12.0778 5.41256 11.6138 5.582 11.1746C5.75079 10.736 5.9854 10.3414 6.28583 9.99079C6.05317 10.0305 5.08701 10.1491 4.9104 10.2762C4.11298 10.853 4.06178 10.5644 3.45203 11.5275C3.04602 12.1687 2.82795 13.2201 2.98566 13.9995C2.98566 14.7262 3.47606 15.3992 3.98372 15.9069C4.49139 16.4145 5.10855 16.669 5.83518 16.6684ZM15.1668 16.6674C16.0518 16.6152 16.7989 16.2685 17.4083 15.6273C18.0169 14.9867 18.3213 14.2144 18.3213 13.3105C18.3213 12.4066 18.0166 11.6344 17.4073 10.9937C16.798 10.3531 16.0511 10.0061 15.1668 9.95266C15.0918 9.95266 15.0169 9.95592 14.9419 9.96244C14.8663 9.96895 14.7907 9.9784 14.7151 9.99079C15.0801 10.4509 15.3649 10.9631 15.5695 11.5275C15.7748 12.0918 15.8774 12.6862 15.8774 13.3105C15.8774 13.9348 15.7751 14.5292 15.5705 15.0935C15.3652 15.6579 15.0804 16.1701 14.7161 16.6302C14.7911 16.6433 14.866 16.6527 14.941 16.6586C15.0166 16.6651 15.0918 16.6674 15.1668 16.6674ZM10.501 18.687C9.8747 18.687 9.28296 18.5902 8.72577 18.3966C8.16857 18.2031 7.66253 17.9245 7.20765 17.5608C7.0356 17.6188 6.85443 17.658 6.66414 17.6782C6.47384 17.6984 6.27833 17.7088 6.07761 17.7094C4.87068 17.7094 3.84003 17.2822 2.98566 16.4279C2.13129 15.5735 1.70378 14.5425 1.70312 13.3349C1.70312 12.143 2.11923 11.1234 2.95144 10.2762C3.78365 9.42903 4.79182 8.99239 5.97595 8.96632C6.11411 8.96632 6.24575 8.97577 6.37087 8.99467C6.496 9.01292 6.62112 9.03475 6.74625 9.06017L4.08637 3.73063C3.94821 3.46734 3.95733 3.2122 4.11374 2.96521C4.26949 2.71887 4.49726 2.5957 4.79704 2.5957H7.19689C7.49667 2.5957 7.76908 2.67456 8.01412 2.83227C8.25915 2.98998 8.45238 3.20047 8.5938 3.46376L10.501 7.25661L12.4072 3.46376C12.5486 3.20047 12.7418 2.98998 12.9869 2.83227C13.2319 2.67456 13.5043 2.5957 13.8041 2.5957H16.2059C16.5057 2.5957 16.7338 2.71887 16.8902 2.96521C17.0459 3.21286 17.0547 3.46799 16.9166 3.73063L14.2987 8.99272C14.4115 8.9673 14.5275 8.9484 14.6467 8.93602C14.7653 8.92299 14.8875 8.91647 15.0133 8.91647C16.2098 8.9471 17.2232 9.38601 18.0534 10.2332C18.8837 11.0804 19.2988 12.1062 19.2988 13.3105C19.2988 14.5337 18.8716 15.5729 18.0173 16.4279C17.1629 17.2829 16.1238 17.7101 14.8999 17.7094C14.7031 17.7094 14.5118 17.699 14.3261 17.6782C14.1404 17.6573 13.9611 17.6182 13.7884 17.5608C13.3342 17.9121 12.8291 18.1875 12.2733 18.3869C11.7174 18.5863 11.1266 18.6863 10.501 18.687ZM10.501 14.3858L9.45403 15.1776C9.36866 15.2337 9.28981 15.2346 9.21747 15.1805C9.14513 15.1265 9.12493 15.0548 9.15686 14.9655L9.54592 13.6614L8.51755 12.9195C8.43283 12.8634 8.40676 12.7918 8.43935 12.7044C8.47193 12.6171 8.53449 12.5734 8.62703 12.5734H9.90565L10.3133 11.2108C10.3459 11.1221 10.4084 11.0778 10.501 11.0778C10.5935 11.0778 10.6561 11.1221 10.6887 11.2108L11.0963 12.5734H12.3749C12.4675 12.5734 12.53 12.6171 12.5626 12.7044C12.5952 12.7918 12.5691 12.8634 12.4844 12.9195L11.456 13.6624L11.8451 14.9645C11.8777 15.0538 11.8578 15.1255 11.7855 15.1796C11.7131 15.2337 11.6339 15.233 11.5479 15.1776L10.501 14.3858ZM13.3231 8.75029L15.9205 3.57324H13.4531L11.3192 7.80208L11.4267 8.01713C11.7675 8.0823 12.0973 8.17354 12.416 8.29084C12.734 8.40815 13.0364 8.5613 13.3231 8.75029Z"
            fill="currentColor"
          />
        </svg>
      </Button>
    </Stack>
  );
}
